CONFLUENCE PAGES CONTENT
Generated on: 2025-07-05 16:45:39
Total pages in config: 5
================================================================================


================================================================================
PAGE: API 101: Understanding APIs and API Management
PAGE ID: 4151280097
ORIGINAL TITLE: API 101 - Understanding APIs and API Management
================================================================================

<ac:structured-macro ac:name="toc" ac:schema-version="1" data-layout="default" ac:local-id="6c8ae2ad-33fa-459e-84c6-406b9da11cb7" ac:macro-id="8dd3f3f9-7f81-472d-a688-53a8b7849928"><ac:parameter ac:name="minLevel">1</ac:parameter><ac:parameter ac:name="maxLevel">6</ac:parameter><ac:parameter ac:name="outline">true</ac:parameter><ac:parameter ac:name="style">none</ac:parameter><ac:parameter ac:name="type">list</ac:parameter><ac:parameter ac:name="printable">true</ac:parameter></ac:structured-macro><hr /><h2>What is an API?</h2><p>An Application Programming Interface (or simply API) acts as an intermediary allowing two applications to communicate with each other. It defines methods and protocols used for data exchange between different software components. APIs enable developers to access the functionality or data of another application or service without needing to understand its code.</p><p>At PostNL, APIs play a crucial role in facilitating communication within internal systems and also between those systems and external customers. They enable seamless integration, allowing for efficient tracking, labeling, and confirmation of shipment, for example. </p><h2>Types of APIs</h2><ul><li><p><strong>Public API/Open API: </strong>This means that the API was built with the intention that it can be opened up to external parties. Open does not necessarily mean for free. It should be secure, because it&rsquo;s open to the world.</p></li><li><p><strong>Partner API: </strong>Partner APIs are what the name implies, intended for partners. Essentially, they are open, but they can hold optimizations requested by the partner to optimize their processes. They should be secure, because they are open to the world.</p></li><li><p><strong>Private API: </strong>Private APIs are APIs that were built to be used by the company&rsquo;s own systems and processes. They can run over the public internet, but, especially with an on-premises installation, this is not necessarily the case.</p></li><li><p><strong>Internal APIs: </strong>All APIs that don&rsquo;t leave the internal network. Primarily one provider and one consumer. They are &lsquo;married to each other&rsquo;. Because they &lsquo;are married&rsquo;, they speak their own language and protocols. Internal APIs are often used for legacy interfaces and east-west communication.</p></li></ul><p>Specifics about the PostNL specific type of APIs is to be decided. The PostNL overview of API Types including their own designated place:</p><ac:image ac:align="center" ac:layout="center" ac:original-height="519" ac:original-width="930" ac:custom-width="true" ac:alt="image-20240510-122446.png" ac:width="760"><ri:attachment ri:filename="image-20240510-122446.png" ri:version-at-save="1" /></ac:image><h2>Architecture</h2><h4>Akamai</h4><p>Akamai serves as sort of a firewall, acting as a security layer for public calls. Important to note: Internal network (within PostNL AWS Landing Zone) traffic bypasses Akamai, ensuring faster (yet secure) communication within our infrastructure.</p><h4>Gravitee Internal </h4><p>The Internal Management Platform that deals with Private API (as mentioned in the <em>Types of API</em> section above) for communication between PostNL own systems. The best practice is to prevent adding business logic to an API within API Management. When adding business logic, the complexity of the API increases. The following environments are available: <em>Development</em>,<em> Test</em>, <em>Acceptance</em> and <em>Production</em>. </p><h4>Gravitee External</h4><p>The External Management Platform that deals with Public/Open API and also Partner API (as mentioned in the <em>Types of API</em> section above) for communication between PostNL and Customers or External Partners. The following environments are available: <em>Staging</em>, <em>Development</em>,<em> Test</em>, <em>Acceptance</em>, <em>Sandbox</em> (for Customer&rsquo;s validation) and <em>Production</em>.</p><p>External APIs are always categorized into buckets, each serving as an entry point for a range of APIs. For instance, the Shipment bucket includes APIs related to labeling, confirming, and other shipment processes. <ac:inline-comment-marker ac:ref="8ee42865-4a01-47c7-a677-2b04e0d96431">In most of the cases, it is also necessary for us to have linked APIs to the External APIs. That means that we might have one API interfacing with the external systems and another one implementing the real function of the flow. Sometimes - and preferably, if possible -, the linked API is the same as the Internal API. </ac:inline-comment-marker></p><h4><ac:inline-comment-marker ac:ref="4be525d9-feed-4b9b-8f5f-b13a6ed52523">API-Led Connectivity</ac:inline-comment-marker></h4><p>PostNL uses API-led connectivity approach to drive flexibility and re-usability. It is a methodical way to connect data to applications through reusable and purposeful APIs within an organization&rsquo;s ecosystem. These APIs are based in three layers, developed to play a specific role: unlocking data from <strong>Systems</strong>, composing data into <strong>Processes</strong>, or delivering an <strong>Experience</strong>. </p><p>The use of layers according to the API-led connectivity approach come with multiple advantages, such as increase of productivity and agility, faster time-to-market and project launches, and lower maintenance and operational costs. The implementation view of these layers is as follows:</p><ac:image ac:align="center" ac:layout="wide" ac:original-height="437" ac:original-width="487" ac:custom-width="true" ac:alt="image-20240510-131426.png" ac:width="793"><ri:attachment ri:filename="image-20240510-131426.png" ri:version-at-save="1" /></ac:image><ac:structured-macro ac:name="info" ac:schema-version="1" ac:macro-id="053fb415-5600-4acc-8a58-1bf20c3c7953"><ac:rich-text-body><p>It is worth mentioning that each API exists within a specific environment. Having an API in Development does not automatically mean it exists in the Production environment. Each environment is distinct, <ac:inline-comment-marker ac:ref="251bfac3-9dc6-4bad-82c1-531151138422">therefore it is necessary to create a separate API instance for each.</ac:inline-comment-marker></p></ac:rich-text-body></ac:structured-macro><h2>API Terms &amp; Key Concepts</h2><p>Understanding key API terms is essential for effective API management:</p><ol start="1"><li><p><strong>Name:</strong> The name of the API, which identifies its purpose and functionality;</p></li><li><p><strong>Proxy Path (a.k.a. Entrypoint, Base Path, Context Path): </strong>Defines the base path that someone else uses for accessing the (API Management Platform&rsquo;s) API and its versioning;</p></li><li><p><strong>Version:</strong> Specifies the version of the API being created and/or accessed;</p></li><li><p><strong>Backend Endpoint (a.k.a. Target URL, Target Endpoint):</strong> The target URL where the API requests are forwarded for processing;</p></li><li><p><strong>Health Endpoints:</strong> Simple endpoints for active monitoring of API functionality and health;</p></li><li><p><strong>Methods:</strong> Operations (GET, POST, PATCH, OPTIONS) supported by the API, as well known as HTTP verbs. Note that we normally do <strong>not </strong>allow PUT and DELETE methods;</p></li><li><p><strong>Header: </strong></p></li><li><p><strong>Body: </strong></p></li><li><p><strong>Applications:</strong> Representing teams or groups that consumes APIs within Gravitee;</p></li><li><p><strong>Plans:</strong> Different subscription plans defining access levels and rate limits for API consumers. Normally Free, <ac:inline-comment-marker ac:ref="57109d59-51c3-4f17-9ea0-3b5ee4ad84fa">Limited, Basic</ac:inline-comment-marker> and Premium, depending on how many calls the API is going to receive;</p></li><li><p><strong>Rate Limit:</strong> Limits on the number of requests allowed within a specified time frame;</p></li><li><p><strong>Flows:</strong> Defines the request and response flows of API interactions:</p><ol start="1"><li><p>Request - Flow of data from the client (origin of the call) to the API endpoint</p></li><li><p>Response - Flow of data from the API endpoint back to the client (origin of the call)</p></li></ol></li><li><p><strong>Policies:</strong> Blocks of logic applied to API requests and responses for driving specific behaviors (for example, transform headers or mock responses);</p></li><li><p><strong><ac:inline-comment-marker ac:ref="673d42ac-ac58-410d-a8a1-551a212b6c58">Security:</ac:inline-comment-marker></strong><ac:inline-comment-marker ac:ref="673d42ac-ac58-410d-a8a1-551a212b6c58"> Ensuring the integrity and confidentiality of API communication:</ac:inline-comment-marker></p><ol start="1"><li><p><ac:inline-comment-marker ac:ref="d43d6453-473d-4efe-acfe-7ccab242f562">Northbound </ac:inline-comment-marker>- API keys assigned to applications for accessing specific APIs</p></li><li><p><ac:inline-comment-marker ac:ref="b28afee8-caba-4401-b78e-9cc487b18f58">Southbound</ac:inline-comment-marker> - mutual TLS (mTLS, version 1.3 preferred), Virtual Private Cloud (VPC) access, tokens, API keys implemented for securing backend connections</p></li></ol></li></ol><ac:structured-macro ac:name="panel" ac:schema-version="1" ac:macro-id="ccafaf0f-4ed9-4ffe-b2ea-5e5e36435672"><ac:parameter ac:name="panelIcon">:note:</ac:parameter><ac:parameter ac:name="panelIconId">atlassian-note</ac:parameter><ac:parameter ac:name="bgColor">#EAE6FF</ac:parameter><ac:rich-text-body><p>We can have API keys both in northbound and southbound communication. We normally differentiate them by naming them <em>apikey </em>for the keys used by applications and internal systems to call our APIs, and <em>x-api-key</em> for the keys we use to call external systems and applications.</p></ac:rich-text-body></ac:structured-macro><h2><ac:inline-comment-marker ac:ref="2a761904-46f7-4eab-970b-6263d21e20e7">API Endpoint URL</ac:inline-comment-marker></h2><p>Let's delve into the components of API endpoint URLs using as an example the following: <code>https://api.postnl.nl/iot<ac:inline-comment-marker ac:ref="250a2cba-f3ad-4e7a-9c54-d43f9d1516b6">/</ac:inline-comment-marker>v1/customers/123/contracts</code>. This is an endpoint URL, or the main address through which the API consumers will access the API. In this example, <code>https://api.postnl.nl/</code> serves as the base URL for accessing the API&rsquo;s resources and functionalities.</p><p>The base URL is followed by the path segment, that specifies the specific resource or action within the API. In our example,<em> </em><code>/iot/v1/customers/123/contracts</code> represents the path indicating operations related to customer contracts within the IoT domain.</p><p>In the API Management Platform, we can have both fixed and dynamic paths. A fixed path remains constant and points to a specific resource or functionality within the API. For instance, in our URL, <code><ac:inline-comment-marker ac:ref="a5d737eb-6148-4700-b7a4-fe2218c96c85">/iot/v1/customers</ac:inline-comment-marker></code><ac:inline-comment-marker ac:ref="a5d737eb-6148-4700-b7a4-fe2218c96c85"> is a fixed path</ac:inline-comment-marker> representing the IoT section of the API. It remains unchanged across requests and always directs users to the IoT-related functionalities of the API. A dynamic path, also called relative path, contains variable elements that change based on the context of the request. In our example, <code><ac:inline-comment-marker ac:ref="3f4a3493-36aa-4498-8508-1273d1f1ef4f">/123/contracts</ac:inline-comment-marker></code><ac:inline-comment-marker ac:ref="3f4a3493-36aa-4498-8508-1273d1f1ef4f"> is the dynamic path</ac:inline-comment-marker>. These dynamic values allow API consumers to retrieve contracts specific to a particular customer with ID 123.</p><p>Note that fixed paths never changes, being mandatory for all calls to that endpoint. That is why it is important to think on your endpoint URL to be reusable (for similar purpose within the same group) and escalable, in a way that is not necessary to create new APIs endpoints in the future if you only want to add new functionalities to it.</p><ac:image ac:align="center" ac:layout="center" ac:original-height="371" ac:original-width="872" ac:custom-width="true" ac:alt="image-20240515-072541.png" ac:width="636"><ri:attachment ri:filename="image-20240515-072541.png" ri:version-at-save="1" /></ac:image><h2>Logging</h2><p>Every API call will be logged. Every log entry contains the request and response headers and status code, and the request body. Only log entries from failed calls (status code is 4xx or 5xx) will also log the response body</p><h4>Gravitee Analytics</h4><p>Gravitee Analytics provides insights into API usage, inputs, and outputs. Most of these logs are also sent to Splunk for a complete overview of monitoring.</p><h4>Splunk</h4><p>This is a comprehensive logging platform where data is sent for further analysis and monitoring. There are different indexes inside Splunk, that mostly defines how long it will keep the logs available. For more details, check the <ac:link ac:card-appearance="inline"><ri:page ri:content-title="Splunk logging" ri:version-at-save="4" /><ac:link-body>Splunk logging</ac:link-body></ac:link> page.</p><h2>Exposing your API </h2><p>In order that we expose your API using the API Management Platform, you should provide the following information and/or documentation:</p><ol start="1"><li><p>A working <strong>connection</strong>, so that we can connect our proxy API to your backend API</p></li><li><p>A <strong>Postman collection</strong>, to test our proxy</p></li><li><p><strong>OpenAPI Spec (Swagger</strong>), the technical documentation of your API, containing:</p><ol start="1"><li><p>Possible paths, methods</p></li><li><p>Requests (inputs) examples</p></li><li><p>Responses (outputs) examples</p></li></ol></li><li><p>A (fully) filled in <strong>Intake Form</strong>, that consists of the following information:</p><ol start="1"><li><p>Description of the API; what does it do, what should it be (not) used for</p></li><li><p>Technical description of the API</p></li><li><p>Business requirements</p></li><li><p>Expected calls/volume</p></li><li><p>Planning</p></li></ol></li></ol><p>Please refer to the <ac:link><ri:page ri:content-title="Exposing your API via API Management" ri:version-at-save="4" /><ac:link-body>How-to: Exposing your API via API Management</ac:link-body></ac:link> page for more instructions.</p><hr /><h2>References &amp; Useful Links</h2><p>We strongly recommend reading the <ac:link ac:card-appearance="inline"><ri:page ri:content-title="API Conventions" ri:version-at-save="45" /><ac:link-body>API Conventions</ac:link-body></ac:link> document for more details about API Management within PostNL</p><p>For more details on what we expect from you and what you can expect from us, check <ac:link ac:card-appearance="inline"><ri:page ri:content-title="Setting expectations: Definition of Done / Ready" ri:version-at-save="3" /><ac:link-body>Setting expectations: Definition of Done / Ready</ac:link-body></ac:link> </p><p>If you want more detailed information about web API principles within PostNL, please refer to the <ac:link ac:card-appearance="inline"><ri:page ri:space-key="IA" ri:content-title="Web API principles" ri:version-at-save="6" /><ac:link-body>Web API principles</ac:link-body></ac:link> page</p><p> </p><p />

--------------------------------------------------------------------------------

================================================================================
PAGE: Exposing your API via API Management
PAGE ID: 4282548747
ORIGINAL TITLE: Exposing+your+API+via+API+Management
================================================================================

<p>Exposing your API via our API Management Platform is a structured process to ensure consistency, security, and reliability. This guide provides an overview of the steps involved in requesting a new API. If you have any questions, feel free to reach out to our API management team at <a href="mailto:api-beheer@postnl.nl"><span style="color: rgb(7,71,166);"><u>api-beheer@postnl.nl</u></span></a>.</p><hr /><h2>API Request Process Walkthrough</h2><h3>How does API Management work? </h3><p>API management helps you design, expose, and monitor APIs while ensuring they meet organizational standards and security requirements. It ensures APIs are efficient, secure, future-proof and easy to use for both internal and external stakeholders.</p><h4>Do You Already Have an API?</h4><p>If you already have an API and want to expose it through API Management, then you can follow these steps:</p><ol start="1"><li><p><strong>Grant access to your Backend API</strong></p><ul><li><p>We need access to your backend API. That means that we want to set up a <a href="https://postnl.atlassian.net/wiki/spaces/InternAPIplatform/pages/3748955515/Connecting+through+VPC+PrivateLink">VPC/PrivateLink connection</a> with your API Gateway. If your system is not on the PostNL LandingZone on AWS, we need to set up a different connection, with an oAuth flow. If that&rsquo;s the case, please get in touch with us.</p></li></ul></li><li><p><strong>Fill in the API Intake Form</strong></p><ul><li><p>We kindly ask you to fill the API Intake Form in. This form provides us with the necessary information to build our APIs. <br /><ac:structured-macro ac:name="view-file" ac:schema-version="1" ac:macro-id="197d074a-79e5-4474-8759-e51545300840"><ac:parameter ac:name="name"><ri:attachment ri:filename="APMG - New API Intake Form_v2.xlsx" ri:version-at-save="1" /></ac:parameter></ac:structured-macro> </p></li></ul></li><li><p><strong>Generate an OpenAPI Specification (OAS)</strong></p><ul><li><p>It is always good to document your API with examples of requests and responses. Within PostNL, we use the OpenAPI Spec 3.x standards to document our APIs. If your API runs on AWS API Gateway, <a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-export-api.html">you can generate this documentation with the click of a button</a>.</p></li></ul></li><li><p><strong>Generate a Postman Collection</strong></p><ul><li><p>Please send us a Postman collection whenever you have it, for testing purposes.</p></li></ul></li><li><p><strong>Send a formal request for the API Management Team</strong></p><ul><li><p>Please send the intake form, together with the OAS and Postman collection, to <span style="color: rgb(7,71,166);"><u>api-beheer@postnl.nl</u></span>. We kindly request you not to send any keys or secrets directly but to use a secrets tool such as <a href="https://secrets.mendix.com/">Mendix Secrets</a>.</p></li></ul></li></ol><h4>Do you not have an API (yet)?</h4><p>If you are reaching out beforehand for brainstorming or consultation, you can simply contact us at <a href="mailto:api-beheer@postnl.nl"><span style="color: rgb(7,71,166);"><u>api-beheer@postnl.nl</u></span></a>, and we will schedule a meeting with you. Please note that we will request the information listed above in the near future.</p><h3>After Submission</h3><p>With the information you provided, one of our Solution Consultants will create a ticket in Jira and refine it with the team. A meeting or chat might take place, if needed, to collect more info, solve questions, or guide you on important aspects.</p><p>Once we have everything we need, we will then plan the task and build the API at our best effort, following our sprints. We will let you know once everything is ready for deployment on our platform.</p><h3>Standards</h3><p>We have specific standards that we follow. If the current standards are not suitable for you for any reason, please let us know, and we can discuss the possibilities.</p><hr /><h3>Additional References</h3><ul><li><p><a href="https://postnl.atlassian.net/wiki/spaces/InternAPIplatform/pages/4151280097">API 101: Understanding APIs and API Management</a></p></li><li><p><a href="https://postnl.atlassian.net/wiki/spaces/InternAPIplatform/pages/3574989014/Setting+expectations+Definition+of+Done+Ready">Setting expectations: Definition of Done/Ready</a> </p></li><li><p><a href="https://postnl.atlassian.net/wiki/spaces/InternAPIplatform/pages/3614081469">OAS Guidelines and Examples</a></p></li><li><p><span style="color: rgb(255,153,31);">Security documentation [[WIP]]</span></p></li><li><p><a href="https://postnl.atlassian.net/wiki/spaces/InternAPIplatform/pages/4231627296">Health Check endpoints</a></p></li><li><p><a href="https://postnl.atlassian.net/wiki/spaces/InternAPIplatform/pages/4282712815"><span style="color: rgb(255,153,31);">API Standards</span></a></p></li></ul><h3>How-To Articles</h3><ul><li><p><a href="https://postnl.atlassian.net/wiki/spaces/InternAPIplatform/pages/4311613884">Accessing an (internal) API exposed via API Management</a></p></li><li><p><ac:link><ri:page ri:content-title="Connecting through VPC/PrivateLink ( for backends)" ri:version-at-save="6" /><ac:link-body>Connecting through VPC/PrivateLink</ac:link-body></ac:link></p></li></ul>

--------------------------------------------------------------------------------

================================================================================
PAGE: Incident Management
PAGE ID: 4359651961
ORIGINAL TITLE: Incident+Management
================================================================================

<p>On our platforms we would like to handle incidents properly. This will start with good communication and giving the incident the right priority. Below we will explain what you&rsquo;ll need to do to have the incident resolved as quickly as possible and what you can expect from us.</p><p /><p> 1. Communicate the incident to us.<br />Please fill in the following <ac:link><ri:page ri:content-title="Incident Report Form" ri:version-at-save="2" /><ac:link-body>form</ac:link-body></ac:link> and email it to <a href="mailto:api-beheer@postnl.nl">api-beheer@postnl.nl</a>. <br />Most important information to know for us is:<br />- Name of the api (e.g. <em>PostCIF-Labelling-v2_1</em>) or endpoint (e.g. <em>api.postnl.nl/label/v2_1/).</em><br />- Name of the application which you are using (this is the &lsquo;username&rsquo; of your apikey).<br />- Name of your team.<br />- How can we reach you.<br />- Environment where the incident is (prod/acc/sandbox/test).<br />- A timestamp of the problem.<br />- The request sent to the endpoint and the response send from the endpoint.</p><p /><ol start="2"><li><p>Communicate the incident to BPC.<br />The info you gave us above should also be send to BPC. For anything related to packages you will have to inform BPC-pakketten via bpc-pakketten@postnl.nl<br />If it&rsquo;s about an internal PostNL process (most that doesnt fall under the above) an email should go to BPC-commercie <a href="mailto:bpc-commercie@postnl.nl">bpc-commercie@postnl.nl</a><br />Incase of a P1 (see below) you can contact BPC/Compucenter via the following phonenumber: <br /><strong>088-8741302</strong>.</p></li></ol><p /><ol start="3"><li><p>If during working hours and the incident is high priority one you can try to reach out to our team via teams/slack/phone/walk up to us. Best is to try either Larissa Veronese or Frank Hoogstad. </p></li></ol><p /><ol start="4"><li><p>We know incidents are stopping work, but we prioritize the incidents. This is what you can expect from us: <br />P1: Only production environment. Immediate customer or internal problems. <strong>Response time 15 min.</strong><br />P2: Production or Sandbox environment. Api can still be used but has high latency. <strong>Response time 1 hr.</strong><br />P3: Connection issues towards the Sandbox or Production environment based on a single user. <strong>Response time 3 hours.</strong><br />P4 and below: All other issues. <strong>Up to 1 week.</strong></p></li></ol><p /><p /><p />

--------------------------------------------------------------------------------

================================================================================
PAGE: Connecting to Internal APIs
PAGE ID: 4311613884
ORIGINAL TITLE: Exposing+your+API+via+API+Management
================================================================================

<ac:structured-macro ac:name="toc" ac:schema-version="1" data-layout="default" ac:local-id="b2ad13fa-65fb-4f5a-be77-38d5c1f2d03c" ac:macro-id="7ff17886-5bb8-4e33-906a-dfc01b5f8afe"><ac:parameter ac:name="minLevel">1</ac:parameter><ac:parameter ac:name="maxLevel">6</ac:parameter><ac:parameter ac:name="include" /><ac:parameter ac:name="outline">false</ac:parameter><ac:parameter ac:name="indent" /><ac:parameter ac:name="style">none</ac:parameter><ac:parameter ac:name="exclude" /><ac:parameter ac:name="type">list</ac:parameter><ac:parameter ac:name="class" /><ac:parameter ac:name="printable">true</ac:parameter></ac:structured-macro><hr /><h2>Environments</h2><p>All Internal APIs have support for the following environments. Each environment has one or more base URIs defined.</p><h3>Production</h3><p>Production server</p><table data-table-width="760" data-layout="default" ac:local-id="a0692510-7648-4b23-8c3a-81dbca3cb36e"><tbody><tr><td data-highlight-colour="transparent"><p><strong>Private</strong></p></td><td data-highlight-colour="transparent"><p><code>https://api.p019.aws.cldsvc.net</code></p></td></tr><tr><td data-highlight-colour="transparent"><p><strong>Public</strong></p></td><td data-highlight-colour="transparent"><p><code>https://internal-api.sec.cldsvc.net</code></p></td></tr></tbody></table><h3>Non-Production</h3><p>Acceptance environment for testing and validation</p><table data-table-width="760" data-layout="default" ac:local-id="6ae25c8b-2c18-4607-a70a-a13e3f670cc9"><tbody><tr><td data-highlight-colour="transparent"><p><strong>Private</strong></p></td><td data-highlight-colour="transparent"><p><code>https://api-acc.a019.aws.cldsvc.net</code></p></td></tr><tr><td data-highlight-colour="transparent"><p><strong>Public</strong></p></td><td data-highlight-colour="transparent"><p><code>https://internal-api-acc.sec.cldsvc.net</code></p></td></tr></tbody></table><p><ac:emoticon ac:name="blue-star" ac:emoji-shortname=":warning:" ac:emoji-id="26a0" ac:emoji-fallback="⚠️" /> Please note that for all public URIs, mTLS connection is required. Check our <a href="https://postnl.atlassian.net/wiki/spaces/InternAPIplatform/pages/4311613884/Connecting+to+Internal+APIs#FAQ">Frequently Asked Questions</a> for more information about mTLS and certificates.</p><h2>Authorization</h2><p>All Internal API uses the <code>APIKeyHeader (Custom Header Signature)</code>authentication scheme, with the following header parameters:</p><table data-table-width="760" data-layout="default" ac:local-id="af63c21c-e3b0-46a0-81dd-3fb50a3ba3be"><tbody><tr><td data-highlight-colour="transparent"><p><strong>Header</strong></p></td><td data-highlight-colour="transparent"><p><strong>Default</strong></p></td></tr><tr><td data-highlight-colour="transparent"><p>apikey</p></td><td data-highlight-colour="transparent"><p><em>None</em></p></td></tr></tbody></table><p>The request looks like this:</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="0a05bc0c-e332-4ab7-8bc8-90a26bf8fbac"><ac:plain-text-body><![CDATA[curl {BASEURI} \
  -H 'apikey: {APIKEY}']]></ac:plain-text-body></ac:structured-macro><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="1865f145-99c6-473f-bb38-ba05d65f538c"><ac:plain-text-body><![CDATA[GET / HTTP/1.1
Host: {HOST}
apikey: {APIKEY}]]></ac:plain-text-body></ac:structured-macro><h2>FAQ</h2><h3>1. How can I get my API Keys? </h3><p>To get your API key, you can send an e-mail to <a href="mailto:api-beheer@postnl.nl">api-beheer@postnl.nl</a> mentioning the following information:</p><ul><li><p>The API you need access to</p></li><li><p>(your) Team/Application name</p></li><li><p>Product Owner name &amp; contact info</p></li></ul><p>The #include team will then subscribe you to the API, create a key and send it via a secure link.</p><h3>2. When to use Private vs Public endpoints?</h3><p>PostNL has a <em>&lsquo;private unless&rsquo;</em> policy, which means that, if possible, we will always advise you to go private. That normally is possible when your server (where you are connecting from) is within PostNL Landing Zone/AWS environments, and you are able to use VPC-e connections. This also applies if you are connecting from Salesforce&rsquo;s UAT and Prod environments. </p><p>If that does not fit your case, then is necessary to go with a connection via the internet, and therefore you should use the public endpoints.<strong> </strong>It is also worth mentioning that you should always use the public endpoint when using Postman.</p><h3>3. Is mTLS mandatory when connecting to the API Management Platform?</h3><p>If you are connecting using the public endpoints, then the answer is yes. The Mutual TLS (mTLS) is part of our setup and is always required when accessing any API from the API Management Platform via internet. This is due to our focus on security and the <em>&lsquo;private unless&rsquo;</em> policy from PostNL.</p><h3>4. How can I connect using mTLS?</h3><p>You will need a certificate from Digicert. For more information and steps, please check <a href="https://postnl.atlassian.net/wiki/spaces/EFW/pages/3841524222/Certificate+Services#Client-certificates">this reference page</a> from the Enterprise Firewall-team. </p><h3>5. I cannot connect to the API or it is not working. What do I do?</h3><p>We understand that even when following the above steps correctly, sometimes things do not work as expected. This could be due to various reasons. Here are the most common ones:</p><ul><li><p><strong>I get a 5xx error response</strong>: Errors from the 5xx family can happen for a lot of reasons. It is possible that there might be an issue with you connecting to our platform, or that we are unable to reach the backend API and are simply passing through the error to you. Please check if you are using the correct URL and if mTLS is implemented correctly. If the problem persists, please contact us so we can investigate further.</p></li><li><p><strong>I get an 400 error code with &quot;Invalid URL&quot; message</strong>: Check the URI you are using. It is probably not the right one.</p></li><li><p><strong>I get a 401 error response</strong>: We were not able to resolve the authorization for your request. This is related to the API key. Please check if you included it in the call and/or if it is the right one for the environment you are trying to access.</p></li><li><p><strong>I get a 403 error code message: </strong>That could either mean that you cannot connect to us, or that we could not connect to the main backend API on your behalf. If you are using our public URL, please ensure you have implemented the mTLS certificates correctly. If it still is not working, please contact us.</p></li><li><p><strong>I get a 405 error response</strong>: The method you are using is not allowed. For example, you might be trying to perform a POST on an API that only accepts GET requests. Please check the response message for the correct method.</p></li><li><p><strong>I get a 200 status code but with an error message in the response body</strong>: Your connection is successful, but there might be a problem with you request. Please contact the backend team for more information about the expected functional behavior of the API.</p></li><li><p><strong>I get a 200 status code but with an empty response body</strong>: Your connection is successful, and your request is apparently fine. Please contact the backend team for more information about the expected functional behavior of the API.</p></li></ul><p>For any other questions or issues you might have, please do not hesitate to contact us at <a href="mailto:api-beheer@postnl.nl">api-beheer@postnl.nl</a>. We will be happy to assist as best as we can. Please note that many cases might be beyond our reach, and you will need to discuss them with the backend team yourself. We can, of course, guide you in this.</p><h3>6. I have questions about the functional use of the API. Who can I contact?</h3><p>If you have any doubts about the functionality of the API, it is best to contact the backend team that provides the original API. The API Management Platform usually acts as a passthrough and does not include any logic or coding, so the backend teams are still the owners. If you do not know who the backend team is in your specific case, we can help you identify them.</p>

--------------------------------------------------------------------------------

================================================================================
PAGE: Connecting to Internal APIs
PAGE ID: 4311613884
ORIGINAL TITLE: Connecting+to+Internal+APIs#1.-How-can-I-get-my-API-Keys?
================================================================================

<ac:structured-macro ac:name="toc" ac:schema-version="1" data-layout="default" ac:local-id="b2ad13fa-65fb-4f5a-be77-38d5c1f2d03c" ac:macro-id="7ff17886-5bb8-4e33-906a-dfc01b5f8afe"><ac:parameter ac:name="minLevel">1</ac:parameter><ac:parameter ac:name="maxLevel">6</ac:parameter><ac:parameter ac:name="include" /><ac:parameter ac:name="outline">false</ac:parameter><ac:parameter ac:name="indent" /><ac:parameter ac:name="style">none</ac:parameter><ac:parameter ac:name="exclude" /><ac:parameter ac:name="type">list</ac:parameter><ac:parameter ac:name="class" /><ac:parameter ac:name="printable">true</ac:parameter></ac:structured-macro><hr /><h2>Environments</h2><p>All Internal APIs have support for the following environments. Each environment has one or more base URIs defined.</p><h3>Production</h3><p>Production server</p><table data-table-width="760" data-layout="default" ac:local-id="a0692510-7648-4b23-8c3a-81dbca3cb36e"><tbody><tr><td data-highlight-colour="transparent"><p><strong>Private</strong></p></td><td data-highlight-colour="transparent"><p><code>https://api.p019.aws.cldsvc.net</code></p></td></tr><tr><td data-highlight-colour="transparent"><p><strong>Public</strong></p></td><td data-highlight-colour="transparent"><p><code>https://internal-api.sec.cldsvc.net</code></p></td></tr></tbody></table><h3>Non-Production</h3><p>Acceptance environment for testing and validation</p><table data-table-width="760" data-layout="default" ac:local-id="6ae25c8b-2c18-4607-a70a-a13e3f670cc9"><tbody><tr><td data-highlight-colour="transparent"><p><strong>Private</strong></p></td><td data-highlight-colour="transparent"><p><code>https://api-acc.a019.aws.cldsvc.net</code></p></td></tr><tr><td data-highlight-colour="transparent"><p><strong>Public</strong></p></td><td data-highlight-colour="transparent"><p><code>https://internal-api-acc.sec.cldsvc.net</code></p></td></tr></tbody></table><p><ac:emoticon ac:name="blue-star" ac:emoji-shortname=":warning:" ac:emoji-id="26a0" ac:emoji-fallback="⚠️" /> Please note that for all public URIs, mTLS connection is required. Check our <a href="https://postnl.atlassian.net/wiki/spaces/InternAPIplatform/pages/4311613884/Connecting+to+Internal+APIs#FAQ">Frequently Asked Questions</a> for more information about mTLS and certificates.</p><h2>Authorization</h2><p>All Internal API uses the <code>APIKeyHeader (Custom Header Signature)</code>authentication scheme, with the following header parameters:</p><table data-table-width="760" data-layout="default" ac:local-id="af63c21c-e3b0-46a0-81dd-3fb50a3ba3be"><tbody><tr><td data-highlight-colour="transparent"><p><strong>Header</strong></p></td><td data-highlight-colour="transparent"><p><strong>Default</strong></p></td></tr><tr><td data-highlight-colour="transparent"><p>apikey</p></td><td data-highlight-colour="transparent"><p><em>None</em></p></td></tr></tbody></table><p>The request looks like this:</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="0a05bc0c-e332-4ab7-8bc8-90a26bf8fbac"><ac:plain-text-body><![CDATA[curl {BASEURI} \
  -H 'apikey: {APIKEY}']]></ac:plain-text-body></ac:structured-macro><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="1865f145-99c6-473f-bb38-ba05d65f538c"><ac:plain-text-body><![CDATA[GET / HTTP/1.1
Host: {HOST}
apikey: {APIKEY}]]></ac:plain-text-body></ac:structured-macro><h2>FAQ</h2><h3>1. How can I get my API Keys? </h3><p>To get your API key, you can send an e-mail to <a href="mailto:api-beheer@postnl.nl">api-beheer@postnl.nl</a> mentioning the following information:</p><ul><li><p>The API you need access to</p></li><li><p>(your) Team/Application name</p></li><li><p>Product Owner name &amp; contact info</p></li></ul><p>The #include team will then subscribe you to the API, create a key and send it via a secure link.</p><h3>2. When to use Private vs Public endpoints?</h3><p>PostNL has a <em>&lsquo;private unless&rsquo;</em> policy, which means that, if possible, we will always advise you to go private. That normally is possible when your server (where you are connecting from) is within PostNL Landing Zone/AWS environments, and you are able to use VPC-e connections. This also applies if you are connecting from Salesforce&rsquo;s UAT and Prod environments. </p><p>If that does not fit your case, then is necessary to go with a connection via the internet, and therefore you should use the public endpoints.<strong> </strong>It is also worth mentioning that you should always use the public endpoint when using Postman.</p><h3>3. Is mTLS mandatory when connecting to the API Management Platform?</h3><p>If you are connecting using the public endpoints, then the answer is yes. The Mutual TLS (mTLS) is part of our setup and is always required when accessing any API from the API Management Platform via internet. This is due to our focus on security and the <em>&lsquo;private unless&rsquo;</em> policy from PostNL.</p><h3>4. How can I connect using mTLS?</h3><p>You will need a certificate from Digicert. For more information and steps, please check <a href="https://postnl.atlassian.net/wiki/spaces/EFW/pages/3841524222/Certificate+Services#Client-certificates">this reference page</a> from the Enterprise Firewall-team. </p><h3>5. I cannot connect to the API or it is not working. What do I do?</h3><p>We understand that even when following the above steps correctly, sometimes things do not work as expected. This could be due to various reasons. Here are the most common ones:</p><ul><li><p><strong>I get a 5xx error response</strong>: Errors from the 5xx family can happen for a lot of reasons. It is possible that there might be an issue with you connecting to our platform, or that we are unable to reach the backend API and are simply passing through the error to you. Please check if you are using the correct URL and if mTLS is implemented correctly. If the problem persists, please contact us so we can investigate further.</p></li><li><p><strong>I get an 400 error code with &quot;Invalid URL&quot; message</strong>: Check the URI you are using. It is probably not the right one.</p></li><li><p><strong>I get a 401 error response</strong>: We were not able to resolve the authorization for your request. This is related to the API key. Please check if you included it in the call and/or if it is the right one for the environment you are trying to access.</p></li><li><p><strong>I get a 403 error code message: </strong>That could either mean that you cannot connect to us, or that we could not connect to the main backend API on your behalf. If you are using our public URL, please ensure you have implemented the mTLS certificates correctly. If it still is not working, please contact us.</p></li><li><p><strong>I get a 405 error response</strong>: The method you are using is not allowed. For example, you might be trying to perform a POST on an API that only accepts GET requests. Please check the response message for the correct method.</p></li><li><p><strong>I get a 200 status code but with an error message in the response body</strong>: Your connection is successful, but there might be a problem with you request. Please contact the backend team for more information about the expected functional behavior of the API.</p></li><li><p><strong>I get a 200 status code but with an empty response body</strong>: Your connection is successful, and your request is apparently fine. Please contact the backend team for more information about the expected functional behavior of the API.</p></li></ul><p>For any other questions or issues you might have, please do not hesitate to contact us at <a href="mailto:api-beheer@postnl.nl">api-beheer@postnl.nl</a>. We will be happy to assist as best as we can. Please note that many cases might be beyond our reach, and you will need to discuss them with the backend team yourself. We can, of course, guide you in this.</p><h3>6. I have questions about the functional use of the API. Who can I contact?</h3><p>If you have any doubts about the functionality of the API, it is best to contact the backend team that provides the original API. The API Management Platform usually acts as a passthrough and does not include any logic or coding, so the backend teams are still the owners. If you do not know who the backend team is in your specific case, we can help you identify them.</p>

--------------------------------------------------------------------------------
